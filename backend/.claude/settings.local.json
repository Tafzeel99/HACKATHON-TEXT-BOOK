{
  "permissions": {
    "allow": [
      "Bash(python debug_retriever.py)",
      "Bash(python test_agent.py)",
      "Bash(python -c \"\nfrom app.router import HybridRouter\nfrom app.schemas import QueryRequest\nimport asyncio\n\nasync def test_general_query\\(\\):\n    router = HybridRouter\\(\\)\n    request = QueryRequest\\(query=''What is the weather today?'', include_context=True\\)\n    result = await router.route_query\\(request\\)\n    print\\(f''Query type: {result.query_type}''\\)\n    print\\(f''Context used: {result.context_used}''\\)\n    print\\(f''Number of sources: {len\\(result.sources\\)}''\\)\n    print\\(f''Response preview: {result.response[:200]}...''\\)\n\nasyncio.run\\(test_general_query\\(\\)\\)\n\")",
      "Bash(python -m pytest tests/ -v)",
      "Bash(python -c \"\nfrom app.router import HybridRouter\nfrom app.schemas import QueryRequest\nimport asyncio\n\nasync def test_queries\\(\\):\n    router = HybridRouter\\(\\)\n    \n    test_queries = [\n        ''What is artificial intelligence?'',\n        ''Explain machine learning'',\n        ''How does robotics work?'',\n        ''Tell me about computer vision'',\n        ''What is Python programming?''\n    ]\n    \n    for query in test_queries:\n        request = QueryRequest\\(query=query, include_context=True\\)\n        result = await router.route_query\\(request\\)\n        print\\(f''Query: \"\"{query}\"\"''\\)\n        print\\(f''  Type: {result.query_type}, Context used: {result.context_used}, Sources: {len\\(result.sources\\)}''\\)\n        print\\(\\)\n\nasyncio.run\\(test_queries\\(\\)\\)\n\")",
      "Bash(python -c \"\nimport requests\nimport json\n\n# Test the health endpoint\ntry:\n    response = requests.get\\(''http://localhost:8000/health''\\)\n    print\\(''Health check:'', response.json\\(\\) if response.status_code == 200 else f''Error: {response.status_code}''\\)\nexcept Exception as e:\n    print\\(''Health check failed - server might not be running:'', str\\(e\\)\\)\n\")",
      "Bash(uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload)",
      "Bash(timeout 5)",
      "Bash(curl http://localhost:8000/health)",
      "Bash(python -c \"\nimport uvicorn\nfrom app.main import app\nprint\\(''Starting server...''\\)\n\")",
      "Bash(python -m uvicorn app.main:app --host 0.0.0.0 --port 8000)",
      "Bash(python -m uvicorn app.main:app --host 0.0.0.0 --port 8001)",
      "Bash(python -c \"\nfrom app.rag.agent import OpenRouterAgent\n\n# Test the updated agent directly\nagent = OpenRouterAgent\\(\\)\n\n# Test with a conversational query that should use context\ncontext = ''''''Source 1: Introduction to Physical AI & Humanoid Robotics\nURL: https://example.com/chapter1\nScore: 0.704\n\nPhysical AI & Humanoid Robotics: An Introduction\n\nArtificial Intelligence in physical systems represents a significant advancement in robotics, combining traditional AI with embodied intelligence.\n\nSource 2: Machine Learning in Robotics\nURL: https://example.com/chapter2\nScore: 0.446\n\nMachine learning has revolutionized robotics by enabling robots to learn from experience and adapt to new situations.\n''''''\n\nprint\\(''Testing conversational query with context...''\\)\nresponse = agent.generate_response_with_context\\(''module 2?'', context\\)\nprint\\(f''Response: {response[:200]}...''\\)\n\")",
      "Bash(python -c \"\nfrom app.rag.agent import OpenRouterAgent\n\n# Test the updated agent with various conversational queries\nagent = OpenRouterAgent\\(\\)\n\ncontext = ''''''Source 1: Introduction to Physical AI & Humanoid Robotics\nURL: https://example.com/chapter1\nScore: 0.704\n\nPhysical AI & Humanoid Robotics: An Introduction\n\nArtificial Intelligence in physical systems represents a significant advancement in robotics, combining traditional AI with embodied intelligence.\n\nSource 2: Machine Learning in Robotics\nURL: https://example.com/chapter2\nScore: 0.446\n\nMachine learning has revolutionized robotics by enabling robots to learn from experience and adapt to new situations.\n''''''\n\ntest_queries = [\n    ''this topic?'',\n    ''explain this'',\n    ''chapter 1?'',\n    ''what about this?''\n]\n\nfor query in test_queries:\n    print\\(f''Query: \"\"{query}\"\"''\\)\n    response = agent.generate_response_with_context\\(query, context\\)\n    print\\(f''Response: {response[:150]}...''\\)\n    print\\(\\)\n\")",
      "Bash(powershell -ExecutionPolicy Bypass -File \".specify/scripts/powershell/setup-plan.ps1\" -Json)",
      "Bash(powershell -ExecutionPolicy Bypass -File \".specify/scripts/powershell/check-prerequisites.ps1\" -Json)",
      "Bash(powershell -ExecutionPolicy Bypass -File \"../.specify/scripts/powershell/check-prerequisites.ps1\" -Json -RequireTasks -IncludeTasks)",
      "Bash(curl -X POST http://localhost:8001/query -H \"Content-Type: application/json\" -d \"{\"\"query\"\":\"\"What is module 2?\"\", \"\"include_context\"\": true, \"\"debug_context\"\": true}\")",
      "Bash(curl -X POST http://localhost:8000/query -H \"Content-Type: application/json\" -d \"{\"\"query\"\": \"\"What is Physical AI & Humanoid Robotics?\"\", \"\"include_context\"\": true}\")",
      "Bash(curl -X POST http://localhost:8000/query -H \"Content-Type: application/json\" -d \"{\"\"query\"\": \"\"What is module 2?\"\", \"\"include_context\"\": true, \"\"debug_context\"\": true}\")",
      "Bash(python -c \"\nfrom app.router import HybridRouter\nfrom app.schemas import QueryRequest\nimport asyncio\n\nasync def test_queries\\(\\):\n    router = HybridRouter\\(\\)\n    \n    test_queries = [\n        ''hi'',\n        ''hello'',\n        ''thanks'',\n        ''what is module 2?'',\n        ''explain module 2'',\n        ''What is Physical AI & Humanoid Robotics?'',\n        ''this topic?'',\n        ''module 2?''\n    ]\n    \n    for query in test_queries:\n        print\\(f''\\\\n--- Testing query: \"\"{query}\"\" ---''\\)\n        request = QueryRequest\\(query=query, include_context=True\\)\n        result = await router.route_query\\(request\\)\n        print\\(f''Query type: {result.query_type}''\\)\n        print\\(f''Context used: {result.context_used}''\\)\n        print\\(f''Context source: {result.context_source}''\\)\n        print\\(f''Sources count: {len\\(result.sources\\)}''\\)\n        print\\(f''Response preview: {result.response[:200]}...''\\)\n        if result.debug_info:\n            print\\(f''Debug info: {result.debug_info}''\\)\n\nasyncio.run\\(test_queries\\(\\)\\)\n\")",
      "Bash(python -c \"\nfrom app.router import HybridRouter\nfrom app.schemas import QueryRequest\nimport asyncio\n\nasync def test_general_conversation\\(\\):\n    router = HybridRouter\\(\\)\n    \n    test_queries = [\n        ''hi'',\n        ''hello'',\n        ''thanks'',\n        ''who are you''\n    ]\n    \n    for query in test_queries:\n        print\\(f''\\\\n--- Testing query: \"\"{query}\"\" ---''\\)\n        request = QueryRequest\\(query=query, include_context=True\\)\n        result = await router.route_query\\(request\\)\n        print\\(f''Query type: {result.query_type}''\\)\n        print\\(f''Context used: {result.context_used}''\\)\n        print\\(f''Context source: {result.context_source}''\\)\n        print\\(f''Sources count: {len\\(result.sources\\)}''\\)\n        print\\(f''Response: {result.response}''\\)\n        if result.debug_info:\n            print\\(f''Debug info: {result.debug_info}''\\)\n\nasyncio.run\\(test_general_conversation\\(\\)\\)\n\")",
      "Bash(python -c \"\nimport sys\nimport codecs\nsys.stdout.reconfigure\\(encoding=''utf-8''\\)  # Force UTF-8 encoding\n\nfrom app.router import HybridRouter\nfrom app.schemas import QueryRequest\nimport asyncio\n\nasync def test_general_conversation\\(\\):\n    router = HybridRouter\\(\\)\n    \n    test_queries = [\n        ''hi'',\n        ''hello'',\n        ''thanks'',\n        ''who are you''\n    ]\n    \n    for query in test_queries:\n        print\\(f''\\\\n--- Testing query: \"\"{query}\"\" ---''\\)\n        request = QueryRequest\\(query=query, include_context=True\\)\n        result = await router.route_query\\(request\\)\n        print\\(f''Query type: {result.query_type}''\\)\n        print\\(f''Context used: {result.context_used}''\\)\n        print\\(f''Context source: {result.context_source}''\\)\n        print\\(f''Sources count: {len\\(result.sources\\)}''\\)\n        response_safe = result.response.encode\\(''utf-8'', errors=''ignore''\\).decode\\(''utf-8''\\)\n        print\\(f''Response: {response_safe}''\\)\n        if result.debug_info:\n            print\\(f''Debug info: {result.debug_info}''\\)\n\nasyncio.run\\(test_general_conversation\\(\\)\\)\n\")",
      "Bash(curl -X POST http://localhost:8000/query -H \"Content-Type: application/json\" -d \"{\"\"query\"\": \"\"who are you\"\", \"\"include_context\"\": true}\")",
      "Bash(curl -X POST http://localhost:8000/query -H \"Content-Type: application/json\" -d \"{\"\"query\"\": \"\"what is this book?\"\", \"\"include_context\"\": true, \"\"debug_context\"\": true}\")"
    ]
  }
}
